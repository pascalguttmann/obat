Version 4
SHEET 1 2792 1356
WIRE 992 -112 992 -160
WIRE 2336 -96 2288 -96
WIRE 2464 -80 2400 -80
WIRE 2336 -64 2288 -64
WIRE 1344 -32 1344 -160
WIRE 992 16 992 -32
WIRE 1136 16 992 16
WIRE 1280 16 1216 16
WIRE 992 64 992 16
WIRE 1344 96 1344 64
WIRE 1440 96 1344 96
WIRE 1520 96 1440 96
WIRE 1648 96 1584 96
WIRE 1712 96 1648 96
WIRE 1904 96 1776 96
WIRE 1920 96 1904 96
WIRE 720 112 704 112
WIRE 768 112 720 112
WIRE 928 112 848 112
WIRE 1344 112 1344 96
WIRE 720 176 720 112
WIRE 1344 208 1344 192
WIRE 2336 208 2288 208
WIRE 2464 224 2400 224
WIRE 2336 240 2288 240
WIRE 160 256 96 256
WIRE 240 256 160 256
WIRE 720 272 720 256
WIRE 992 272 992 160
WIRE 208 336 176 336
WIRE 320 336 208 336
WIRE 128 416 96 416
WIRE 240 416 128 416
WIRE 208 496 176 496
WIRE 320 496 208 496
WIRE 992 496 992 448
WIRE 128 576 96 576
WIRE 240 576 128 576
WIRE 1344 576 1344 448
WIRE 2240 576 2224 576
WIRE 2448 592 2304 592
WIRE 2448 608 2352 608
WIRE 992 624 992 576
WIRE 1136 624 992 624
WIRE 1280 624 1216 624
WIRE 2448 624 2400 624
WIRE 2240 640 2224 640
WIRE 2528 640 2512 640
WIRE 2544 640 2528 640
WIRE 208 656 176 656
WIRE 320 656 208 656
WIRE 992 672 992 624
WIRE 2528 672 2528 640
WIRE 2544 672 2528 672
WIRE 2240 688 2224 688
WIRE 2352 704 2352 608
WIRE 2352 704 2304 704
WIRE 720 720 704 720
WIRE 768 720 720 720
WIRE 928 720 848 720
WIRE 1344 720 1344 672
WIRE 1424 720 1344 720
WIRE 1504 720 1424 720
WIRE 1616 720 1616 672
WIRE 1616 720 1568 720
WIRE 1696 720 1616 720
WIRE 1856 720 1856 672
WIRE 1856 720 1760 720
WIRE 1904 720 1856 720
WIRE 2240 752 2224 752
WIRE 720 784 720 720
WIRE 2400 784 2400 624
WIRE 2400 784 2240 784
WIRE 1344 816 1344 800
WIRE 2240 816 2224 816
WIRE 2448 832 2304 832
WIRE 2448 848 2352 848
WIRE 2448 864 2400 864
WIRE 720 880 720 864
WIRE 992 880 992 768
WIRE 2240 880 2224 880
WIRE 2544 880 2512 880
WIRE 2560 880 2544 880
WIRE 2240 928 2176 928
WIRE 2352 944 2352 848
WIRE 2352 944 2304 944
WIRE 2544 944 2544 880
WIRE 2560 944 2544 944
WIRE 2240 992 2176 992
WIRE 2400 1024 2400 864
WIRE 2400 1024 2240 1024
FLAG 16 96 0
FLAG 96 176 0
FLAG 16 256 0
FLAG 96 336 0
FLAG 16 416 0
FLAG 96 496 0
FLAG 16 576 0
FLAG 96 656 0
FLAG 96 96 conf_output_dac
FLAG 176 176 conf_refselect_dac
FLAG 160 256 conf_vref
FLAG 208 336 conf_iref
FLAG 128 416 conf_lvl
FLAG 208 496 conf_uvl
FLAG 128 576 conf_lcl
FLAG 208 656 conf_ucl
FLAG 720 272 0
FLAG 992 272 0
FLAG 992 -160 V_SUP+
IOPIN 992 -160 In
FLAG 1344 -160 V_SUP+
IOPIN 1344 -160 In
FLAG 1344 208 V_SUP-
IOPIN 1344 208 In
FLAG 704 112 conf_output_dac
FLAG 720 880 0
FLAG 992 880 0
FLAG 992 448 V_SUP+
IOPIN 992 448 In
FLAG 1344 448 V_SUP+
IOPIN 1344 448 In
FLAG 1344 816 V_SUP-
IOPIN 1344 816 In
FLAG 704 720 conf_refselect_dac
FLAG 64 -80 0
FLAG 64 -112 0
FLAG 128 -96 high
FLAG 128 -128 low
FLAG 1440 96 conf_output_vshift
FLAG 1904 96 conf_output
FLAG 1648 96 !conf_output
FLAG 1424 720 conf_refselect_vshift
FLAG 1616 720 conf_refselect_v
FLAG 1856 720 conf_refselect_i
FLAG 2368 -112 V_SUP+
IOPIN 2368 -112 In
FLAG 2368 -48 V_SUP-
IOPIN 2368 -48 In
FLAG 2288 -64 conf_lvl
FLAG 2288 -96 conf_uvl
FLAG 2288 240 conf_lcl
FLAG 2288 208 conf_ucl
FLAG 2368 192 V_SUP+
IOPIN 2368 192 In
FLAG 2368 256 V_SUP-
IOPIN 2368 256 In
FLAG 2464 -80 !limits_ok_v
FLAG 2464 224 !limits_ok_i
FLAG 2448 640 low
FLAG 2448 656 low
FLAG 2240 784 low
FLAG 2240 624 high
FLAG 2240 608 high
FLAG 2240 592 high
FLAG 2240 704 high
FLAG 2240 720 high
FLAG 2240 736 high
FLAG 2448 880 low
FLAG 2448 896 low
FLAG 2240 1024 low
FLAG 2240 864 high
FLAG 2240 848 high
FLAG 2240 832 high
FLAG 2240 944 high
FLAG 2240 960 high
FLAG 2240 976 high
FLAG 2224 576 conf_refselect_v
FLAG 2224 640 !limits_ok_v
FLAG 2224 688 conf_refselect_i
FLAG 2224 752 !limits_ok_i
FLAG 2544 640 conf_ok
FLAG 2224 816 conf_ok
FLAG 2224 880 conf_output
FLAG 2176 992 low
FLAG 2176 928 low
FLAG 2560 880 !relay_connect
FLAG 2560 944 !relay_connect
IOPIN 2560 944 Out
FLAG 2544 672 conf_ok
IOPIN 2544 672 Out
FLAG 1856 672 conf_refselect_i
IOPIN 1856 672 Out
FLAG 1616 672 conf_refselect_v
IOPIN 1616 672 Out
FLAG 240 256 conf_vref
IOPIN 240 256 Out
FLAG 320 336 conf_iref
IOPIN 320 336 Out
FLAG 240 416 conf_lvl
IOPIN 240 416 Out
FLAG 320 496 conf_uvl
IOPIN 320 496 Out
FLAG 240 576 conf_lcl
IOPIN 240 576 Out
FLAG 320 656 conf_ucl
IOPIN 320 656 Out
SYMBOL voltage 112 96 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 192 176 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 250m 1n 1n 500m 1)
SYMBOL voltage 112 256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3
SYMBOL voltage 192 336 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2
SYMBOL voltage 112 416 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 0.5
SYMBOL voltage 192 496 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 4.5
SYMBOL voltage 112 576 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 4.5
SYMBOL voltage 192 656 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0.5
SYMBOL npn 928 64 R0
SYMATTR InstName Q1
SYMATTR Value DI_DNLS350E
SYMBOL pnp 1280 64 M180
SYMATTR InstName Q2
SYMATTR Value DI_DPLS350E
SYMBOL res 704 160 R0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL res 864 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 1008 -16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 1120 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL res 1328 96 R0
SYMATTR InstName R5
SYMATTR Value 15k
SYMBOL npn 928 672 R0
SYMATTR InstName Q3
SYMATTR Value DI_DNLS350E
SYMBOL pnp 1280 672 M180
SYMATTR InstName Q4
SYMATTR Value DI_DPLS350E
SYMBOL res 704 768 R0
SYMATTR InstName R6
SYMATTR Value 1Meg
SYMBOL res 864 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 1008 592 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1120 640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 1Meg
SYMBOL res 1328 704 R0
SYMATTR InstName R10
SYMATTR Value 15k
SYMBOL Digital\\buf 64 -176 R0
WINDOW 39 1 -8 Left 2
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Ref=1
SYMATTR InstName A1
SYMBOL Digital\\inv 1520 32 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A2
SYMBOL Digital\\inv 1712 32 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A3
SYMBOL Digital\\inv 1504 656 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A4
SYMBOL Digital\\inv 1696 656 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A5
SYMBOL OpAmps\\UniversalOpAmp2 2368 -80 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=3.5Meg Slew=20Meg
SYMATTR SpiceLine Ilimit=60m Rail=0 Vos=0
SYMATTR SpiceLine2 En=0 Enk=0 In=0 Ink=0 Rin=500G
SYMBOL OpAmps\\UniversalOpAmp2 2368 224 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=1Meg GBW=3.5Meg Slew=20Meg
SYMATTR SpiceLine Ilimit=60m Rail=0 Vos=0
SYMATTR SpiceLine2 En=0 Enk=0 In=0 Ink=0 Rin=500G
SYMBOL Digital\\and 2272 544 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A6
SYMBOL Digital\\and 2272 656 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A7
SYMBOL Digital\\or 2480 560 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A10
SYMBOL Digital\\and 2272 784 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A8
SYMBOL Digital\\and 2272 896 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A9
SYMBOL Digital\\or 2480 800 R0
SYMATTR SpiceLine Vhigh=10, Vlow=-5, Trise=60n, Tfall=60n, Td=30n
SYMATTR InstName A11
TEXT -96 832 Left 2 !.MODEL DI_DNLS350E  NPN (IS=11.7f NF=1.00 BF=388 VAF=127\n+ IKF=2.97 ISE=8.95f NE=2.00 BR=4.00 NR=1.00\n+ VAR=20.0 IKR=4.50 RE=23.8m RB=95.3m RC=9.53m\n+ XTB=1.5 CJE=341p VJE=1.10 MJE=0.500 CJC=45.4p VJC=0.300\n+ MJC=0.300 TF=574p TR=111n EG=1.12 )\n.MODEL DI_DPLS350E  PNP (IS=9.40f NF=1.00 BF=382 VAF=127\n+ IKF=2.48 ISE=8.14f NE=2.00 BR=4.00 NR=1.00\n+ VAR=24.0 IKR=3.75 RE=25.8m RB=0.103 RC=10.3m\n+ XTB=1.5 CJE=337p VJE=1.10 MJE=0.500 CJC=76.7p VJC=0.300\n+ MJC=0.300 TF=645p TR=122n EG=1.12 )
